<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è±ç‰ç±ƒçƒéšŠ - 2025å±æ±ç›ƒ</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
      min-height: 100vh;
      padding: 20px;
      position: relative;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding-top: 20px;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 32px;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .header p {
      font-size: 20px;
      opacity: 0.95;
      font-weight: 500;
    }

    .alert {
      background: rgba(255, 255, 255, 0.1);
      color: #ffcccb;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
      border: 1px solid rgba(255, 204, 203, 0.3);
    }

    .form-card {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .form-title {
      font-size: 24px;
      font-weight: bold;
      color: #333;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    label {
      display: block;
      font-weight: 600;
      color: #555;
      margin-bottom: 8px;
      font-size: 16px;
    }

    select, input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s;
      background: #fafafa;
    }

    select:focus, input:focus {
      outline: none;
      border-color: #1565C0;
      background: white;
      box-shadow: 0 0 0 3px rgba(21, 101, 192, 0.1);
    }

    .date-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
      margin-bottom: 15px;
    }

    .date-btn {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      padding: 12px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
      font-size: 16px;
      font-weight: 600;
    }

    .date-btn:hover {
      border-color: #1565C0;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(21, 101, 192, 0.2);
    }

    .date-btn.selected {
      background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
      color: white;
      border-color: transparent;
    }

    .other-date-input {
      display: none;
      margin-top: 10px;
    }

    .other-date-input.show {
      display: block;
    }

    .flight-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .flight-btn {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: left;
    }

    .flight-btn:hover {
      border-color: #1565C0;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(21, 101, 192, 0.2);
    }

    .flight-btn.selected {
      background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
      color: white;
      border-color: transparent;
    }

    .airline-logo {
      font-size: 24px;
      margin-bottom: 8px;
    }

    .flight-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 5px;
    }

    .flight-time {
      font-size: 18px;
      font-weight: bold;
    }

    .airline-name {
      font-size: 14px;
      color: #666;
      margin-bottom: 3px;
    }

    .flight-btn.selected .airline-name {
      color: rgba(255,255,255,0.8);
    }

    .manual-input-toggle {
      text-align: center;
      margin: 20px 0;
    }

    .toggle-btn {
      background: none;
      border: 2px dashed #1565C0;
      color: #1565C0;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s;
    }

    .toggle-btn:hover {
      background: #1565C0;
      color: white;
      border-style: solid;
    }

    .manual-input {
      display: none;
      margin-top: 20px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
      border: 2px solid #e0e0e0;
    }

    .manual-input.show {
      display: block;
    }

    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    .form-section {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 20px;
      border: 2px solid #e9ecef;
    }

    .section-title {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .submit-btn {
      background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 10px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
      box-shadow: 0 4px 15px rgba(21, 101, 192, 0.3);
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(21, 101, 192, 0.4);
    }

    .table-card {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }

    .table-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .member-count {
      background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 14px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: #f8f9fa;
    }

    th {
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: #555;
      border-bottom: 2px solid #e0e0e0;
    }

    td {
      padding: 15px;
      border-bottom: 1px solid #f0f0f0;
    }

    tbody tr:hover {
      background: #f8f9fa;
    }

    .member-name {
      font-weight: 600;
      color: #333;
    }

    .airline-tag {
      display: inline-block;
      padding: 4px 12px;
      background: #e3f2fd;
      color: #0D47A1;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 600;
    }

    .time-badge {
      background: #f3e5f5;
      color: #7b1fa2;
      padding: 4px 10px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
    }

    .date-badge {
      background: #e8f5e9;
      color: #2e7d32;
      padding: 4px 10px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 10px;
      opacity: 0.5;
    }

    @media (max-width: 768px) {
      .flight-options {
        grid-template-columns: 1fr;
      }

      .input-row, .form-row {
        grid-template-columns: 1fr;
      }

      .table-card {
        overflow-x: auto;
      }

      table {
        min-width: 700px;
      }

      .date-options {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ€ è±ç‰ç±ƒçƒéšŠ - 2025å±æ±ç›ƒ</h1>
      <p>éšŠå“¡è³‡è¨Šç™»è¨˜ç³»çµ±</p>
    </div>

    <div class="alert">
      âš ï¸ è³‡æ–™åº«é€£ç·šå•é¡Œï¼Œç›®å‰ä½¿ç”¨æœ¬åœ°å„²å­˜æ¨¡å¼ã€‚è³‡æ–™å°‡å„²å­˜åœ¨æ‚¨çš„ç€è¦½å™¨ä¸­ã€‚
    </div>

    <div class="form-card">
      <h2 class="form-title">
        <span>ğŸ“</span>
        <span>éšŠå“¡è³‡è¨Šç™»è¨˜</span>
      </h2>

      <form id="memberForm">
        <div class="form-group">
          <label for="memberName">éšŠå“¡å§“å</label>
          <select id="memberName" required>
            <option value="">è«‹é¸æ“‡éšŠå“¡</option>
            <option value="è¶™æ•™">è¶™æ•™</option>
            <option value="å¸ƒ">å¸ƒ</option>
            <option value="adain">adain</option>
            <option value="Alvin">Alvin</option>
            <option value="Earnest">Earnest</option>
            <option value="James">James</option>
            <option value="Jason">Jason</option>
            <option value="Martin">Martin</option>
            <option value="Pine">Pine</option>
            <option value="Rex">Rex</option>
            <option value="Tak">Tak</option>
            <option value="Tf">Tf</option>
            <option value="tsan">tsan</option>
            <option value="wingsun">wingsun</option>
            <option value="Yee">Yee</option>
            <option value="å¤§å¸«å…„">å¤§å¸«å…„</option>
            <option value="ä»">ä»</option>
            <option value="å…‰">å…‰</option>
            <option value="å¤©">å¤©</option>
            <option value="å¥¶">å¥¶</option>
            <option value="å®">å®</option>
            <option value="å·¨å³°">å·¨å³°</option>
            <option value="æ–‡å¨">æ–‡å¨</option>
            <option value="æ°">æ°</option>
            <option value="æ¯›">æ¯›</option>
            <option value="æ´²">æ´²</option>
            <option value="çš®">çš®</option>
            <option value="è¡¨">è¡¨</option>
            <option value="é”">é”</option>
            <option value="éŠ˜">éŠ˜</option>
          </select>
        </div>

        <!-- Personal Information Section -->
        <div class="form-section">
          <div class="section-title">
            <span>ğŸ‘¤</span>
            <span>å€‹äººè³‡æ–™</span>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="chineseName">ä¸­æ–‡å…¨å</label>
              <input type="text" id="chineseName" placeholder="è«‹è¼¸å…¥ä¸­æ–‡å…¨å" required>
            </div>
            <div class="form-group">
              <label for="height">èº«é«˜ (å…¬åˆ†)</label>
              <input type="number" id="height" placeholder="ä¾‹å¦‚ï¼š175" min="150" max="220" required>
            </div>
            <div class="form-group">
              <label for="weight">é«”é‡ (å…¬æ–¤)</label>
              <input type="number" id="weight" placeholder="ä¾‹å¦‚ï¼š70" min="40" max="150" required>
            </div>
          </div>
        </div>

        <!-- Flight Information Section -->
        <div class="form-section">
          <div class="section-title">
            <span>âœˆï¸</span>
            <span>èˆªç­è³‡è¨Š</span>
          </div>

          <div class="form-group">
            <label>å‡ºç™¼æ—¥æœŸ</label>
            <div class="date-options">
              <button type="button" class="date-btn" data-date="2025-06-19">6æœˆ19æ—¥</button>
              <button type="button" class="date-btn" data-date="2025-06-20">6æœˆ20æ—¥</button>
              <button type="button" class="date-btn" data-date="other">å…¶ä»–æ—¥æœŸ</button>
            </div>
            <div class="other-date-input" id="otherDateInput">
              <input type="date" id="customDate" min="2025-06-01" max="2025-12-31">
            </div>
            <input type="hidden" id="selectedDate" required>
          </div>

          <div class="form-group">
            <label>é¸æ“‡èˆªç­</label>
            <div class="flight-options">
              <button type="button" class="flight-btn" data-flight="HX234-0800">
                <div class="airline-logo">ğŸ”µ</div>
                <div class="airline-name">HK Express é¦™æ¸¯å¿«é‹</div>
                <div class="flight-info">
                  <span class="flight-time">08:00 - 09:30</span>
                </div>
              </button>

              <button type="button" class="flight-btn" data-flight="CX420-0835">
                <div class="airline-logo">ğŸŸ¢</div>
                <div class="airline-name">Cathay Pacific åœ‹æ³°èˆªç©º</div>
                <div class="flight-info">
                  <span class="flight-time">08:35 - 10:15</span>
                </div>
              </button>

              <button type="button" class="flight-btn" data-flight="CI920-1010">
                <div class="airline-logo">ğŸ”´</div>
                <div class="airline-name">China Airlines ä¸­è¯èˆªç©º</div>
                <div class="flight-info">
                  <span class="flight-time">10:10 - 11:45</span>
                </div>
              </button>

              <button type="button" class="flight-btn" data-flight="AE390-1010">
                <div class="airline-logo">ğŸŸ¡</div>
                <div class="airline-name">Mandarin Airlines è¯ä¿¡èˆªç©º</div>
                <div class="flight-info">
                  <span class="flight-time">10:10 - 11:45</span>
                </div>
              </button>

              <button type="button" class="flight-btn" data-flight="CX422-1035">
                <div class="airline-logo">ğŸŸ¢</div>
                <div class="airline-name">Cathay Pacific åœ‹æ³°èˆªç©º</div>
                <div class="flight-info">
                  <span class="flight-time">10:35 - 12:15</span>
                </div>
              </button>

              <button type="button" class="flight-btn" data-flight="BR828-1205">
                <div class="airline-logo">ğŸŸ¢</div>
                <div class="airline-name">EVA Air é•·æ¦®èˆªç©º</div>
                <div class="flight-info">
                  <span class="flight-time">12:05 - 13:40</span>
                </div>
              </button>

              <button type="button" class="flight-btn" data-flight="HX236-1245">
                <div class="airline-logo">ğŸ”µ</div>
                <div class="airline-name">HK Express é¦™æ¸¯å¿«é‹</div>
                <div class="flight-info">
                  <span class="flight-time">12:45 - 14:15</span>
                </div>
              </button>
            </div>
          </div>

          <div class="manual-input-toggle">
            <button type="button" class="toggle-btn" onclick="toggleManualInput()">
              æˆ–æ‰‹å‹•è¼¸å…¥å…¶ä»–èˆªç­
            </button>
          </div>

          <div class="manual-input" id="manualInput">
            <div class="input-row">
              <div class="form-group">
                <label for="customAirline">èˆªç©ºå…¬å¸</label>
                <input type="text" id="customAirline" placeholder="ä¾‹å¦‚ï¼šHK Express">
              </div>
              <div class="form-group">
                <label for="customFlightNo">èˆªç­ç·¨è™Ÿ</label>
                <input type="text" id="customFlightNo" placeholder="ä¾‹å¦‚ï¼šHX234">
              </div>
            </div>
            <div class="input-row">
              <div class="form-group">
                <label for="customDeparture">èµ·é£›æ™‚é–“</label>
                <input type="time" id="customDeparture">
              </div>
              <div class="form-group">
                <label for="customArrival">æŠµé”æ™‚é–“</label>
                <input type="time" id="customArrival">
              </div>
            </div>
          </div>
        </div>

        <input type="hidden" id="selectedFlight" required>
        <button type="submit" class="submit-btn">æäº¤è³‡æ–™</button>
      </form>
    </div>

    <div class="table-card">
      <div class="table-header">
        <h2 class="form-title">
          <span>ğŸ“Š</span>
          <span>éšŠå“¡ç™»è¨˜ç‹€æ³</span>
        </h2>
        <div class="member-count" id="memberCount">å·²ç™»è¨˜: 0 äºº</div>
      </div>
      
      <div id="tableContainer">
        <table id="memberTable">
          <thead>
            <tr>
              <th>éšŠå“¡å§“å</th>
              <th>ä¸­æ–‡å§“å</th>
              <th>èº«é«˜</th>
              <th>é«”é‡</th>
              <th>å‡ºç™¼æ—¥æœŸ</th>
              <th>èˆªç©ºå…¬å¸</th>
              <th>èµ·é£›æ™‚é–“</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <!-- Data will be populated here -->
          </tbody>
        </table>
        <div class="empty-state" id="emptyState">
          <div class="empty-state-icon">ğŸ“</div>
          <p>å°šæœªæœ‰éšŠå“¡å®Œæˆè³‡è¨Šç™»è¨˜</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ä½¿ç”¨ localStorage ä½œç‚ºå‚™ç”¨å„²å­˜æ–¹æ¡ˆ
    const STORAGE_KEY = 'toyotama-member-data';
    
    // èˆªç­è³‡æ–™
    const flightData = {
      'HX234-0800': { airline: 'HK Express é¦™æ¸¯å¿«é‹', flightNo: 'HX234', departure: '08:00', arrival: '09:30' },
      'CX420-0835': { airline: 'Cathay Pacific åœ‹æ³°èˆªç©º', flightNo: 'CX420', departure: '08:35', arrival: '10:15' },
      'CI920-1010': { airline: 'China Airlines ä¸­è¯èˆªç©º', flightNo: 'CI920', departure: '10:10', arrival: '11:45' },
      'AE390-1010': { airline: 'Mandarin Airlines è¯ä¿¡èˆªç©º', flightNo: 'AE390', departure: '10:10', arrival: '11:45' },
      'CX422-1035': { airline: 'Cathay Pacific åœ‹æ³°èˆªç©º', flightNo: 'CX422', departure: '10:35', arrival: '12:15' },
      'BR828-1205': { airline: 'EVA Air é•·æ¦®èˆªç©º', flightNo: 'BR828', departure: '12:05', arrival: '13:40' },
      'HX236-1245': { airline: 'HK Express é¦™æ¸¯å¿«é‹', flightNo: 'HX236', departure: '12:45', arrival: '14:15' }
    };

    // å…¨åŸŸè®Šæ•¸
    let selectedDateValue = null;
    let selectedFlightData = null;
    let isManualInput = false;

    // æœ¬åœ°å„²å­˜å‡½æ•¸
    function saveToLocalStorage(data) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function loadFromLocalStorage() {
      const data = localStorage.getItem(STORAGE_KEY);
      return data ? JSON.parse(data) : {};
    }

    // æ—¥æœŸé¸æ“‡
    const dateButtons = document.querySelectorAll('.date-btn');
    dateButtons.forEach(button => {
      button.addEventListener('click', function() {
        dateButtons.forEach(btn => btn.classList.remove('selected'));
        this.classList.add('selected');
        
        const dateValue = this.getAttribute('data-date');
        const otherDateInput = document.getElementById('otherDateInput');
        
        if (dateValue === 'other') {
          otherDateInput.classList.add('show');
          document.getElementById('customDate').focus();
          selectedDateValue = null;
        } else {
          otherDateInput.classList.remove('show');
          selectedDateValue = dateValue;
          document.getElementById('selectedDate').value = dateValue;
        }
      });
    });

    // è‡ªè¨‚æ—¥æœŸè¼¸å…¥
    document.getElementById('customDate').addEventListener('change', function() {
      if (this.value) {
        selectedDateValue = this.value;
        document.getElementById('selectedDate').value = this.value;
      }
    });

    // èˆªç­æŒ‰éˆ•é¸æ“‡
    const flightButtons = document.querySelectorAll('.flight-btn');
    flightButtons.forEach(button => {
      button.addEventListener('click', function() {
        isManualInput = false;
        document.getElementById('manualInput').classList.remove('show');
        clearManualInputs();

        flightButtons.forEach(btn => btn.classList.remove('selected'));
        this.classList.add('selected');
        
        const flightId = this.getAttribute('data-flight');
        selectedFlightData = flightData[flightId];
        document.getElementById('selectedFlight').value = flightId;
      });
    });

    // æ‰‹å‹•è¼¸å…¥åˆ‡æ›
    function toggleManualInput() {
      const manualInput = document.getElementById('manualInput');
      manualInput.classList.toggle('show');
      
      if (manualInput.classList.contains('show')) {
        isManualInput = true;
        flightButtons.forEach(btn => btn.classList.remove('selected'));
        selectedFlightData = null;
        document.getElementById('selectedFlight').value = 'manual';
      } else {
        isManualInput = false;
        clearManualInputs();
      }
    }

    function clearManualInputs() {
      document.getElementById('customAirline').value = '';
      document.getElementById('customFlightNo').value = '';
      document.getElementById('customDeparture').value = '';
      document.getElementById('customArrival').value = '';
    }

    // æ ¼å¼åŒ–æ—¥æœŸé¡¯ç¤º
    function formatDateDMY(dateString) {
      const date = new Date(dateString + 'T00:00:00');
      const day = date.getDate().toString().padStart(2, '0');
      const month = (date.getMonth() + 1).toString().padStart(2, '0');
      const year = date.getFullYear();
      
      const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
      const weekday = weekdays[date.getDay()];
      
      return `${day}/${month}/${year} (${weekday})`;
    }

    // éšŠå“¡é¸æ“‡è™•ç†
    document.getElementById('memberName').addEventListener('change', function() {
      const memberName = this.value;
      if (!memberName) {
        resetForm();
        return;
      }

      // æª¢æŸ¥æœ¬åœ°å„²å­˜ä¸­æ˜¯å¦æœ‰è©²éšŠå“¡çš„è³‡æ–™
      const savedData = loadFromLocalStorage();
      if (savedData[memberName]) {
        const memberData = savedData[memberName];
        
        // å¡«å…¥å€‹äººè³‡æ–™
        if (memberData.chineseName) {
          document.getElementById('chineseName').value = memberData.chineseName;
        }
        if (memberData.height) {
          document.getElementById('height').value = memberData.height;
        }
        if (memberData.weight) {
          document.getElementById('weight').value = memberData.weight;
        }
      }
    });

    function resetForm() {
      document.getElementById('chineseName').value = '';
      document.getElementById('height').value = '';
      document.getElementById('weight').value = '';
      
      dateButtons.forEach(btn => btn.classList.remove('selected'));
      flightButtons.forEach(btn => btn.classList.remove('selected'));
      document.getElementById('otherDateInput').classList.remove('show');
      document.getElementById('manualInput').classList.remove('show');
      clearManualInputs();
      
      selectedDateValue = null;
      selectedFlightData = null;
      isManualInput = false;
    }

    // è¡¨å–®æäº¤
    document.getElementById('memberForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const memberName = document.getElementById('memberName').value;
      const chineseName = document.getElementById('chineseName').value;
      const height = document.getElementById('height').value;
      const weight = document.getElementById('weight').value;
      
      if (!memberName || !chineseName || !height || !weight) {
        alert('è«‹å¡«å¯«å®Œæ•´çš„å€‹äººè³‡æ–™ï¼');
        return;
      }

      if (!selectedDateValue && !document.getElementById('customDate').value) {
        alert('è«‹é¸æ“‡å‡ºç™¼æ—¥æœŸï¼');
        return;
      }

      const flightDate = selectedDateValue || document.getElementById('customDate').value;
      let flightInfo;

      if (isManualInput) {
        const airline = document.getElementById('customAirline').value;
        const flightNo = document.getElementById('customFlightNo').value;
        const departure = document.getElementById('customDeparture').value;
        const arrival = document.getElementById('customArrival').value;

        if (!airline || !flightNo || !departure || !arrival) {
          alert('è«‹å¡«å¯«å®Œæ•´çš„èˆªç­è³‡è¨Šï¼');
          return;
        }

        flightInfo = {
          airline: airline,
          flightNo: flightNo,
          departure: departure,
          arrival: arrival,
          date: flightDate
        };
      } else {
        if (!selectedFlightData) {
          alert('è«‹é¸æ“‡èˆªç­ï¼');
          return;
        }
        flightInfo = {
          ...selectedFlightData,
          date: flightDate
        };
      }

      // å„²å­˜åˆ°æœ¬åœ°å„²å­˜
      const savedData = loadFromLocalStorage();
      savedData[memberName] = {
        chineseName: chineseName,
        height: parseInt(height),
        weight: parseInt(weight),
        ...flightInfo,
        timestamp: Date.now()
      };
      
      saveToLocalStorage(savedData);
      
      alert(`âœ… ${memberName} çš„è³‡æ–™å·²ç™»è¨˜æˆåŠŸï¼`);
      
      // é‡è¨­è¡¨å–®
      document.getElementById('memberForm').reset();
      resetForm();
      
      // æ›´æ–°è¡¨æ ¼
      updateTable();
    });

    // æ›´æ–°è¡¨æ ¼
    function updateTable() {
      const tableBody = document.getElementById('tableBody');
      const emptyState = document.getElementById('emptyState');
      const table = document.getElementById('memberTable');
      const memberCount = document.getElementById('memberCount');

      tableBody.innerHTML = '';

      const savedData = loadFromLocalStorage();
      const members = Object.keys(savedData);

      if (members.length === 0) {
        table.style.display = 'none';
        emptyState.style.display = 'block';
        memberCount.textContent = 'å·²ç™»è¨˜: 0 äºº';
        return;
      }

      table.style.display = 'table';
      emptyState.style.display = 'none';
      memberCount.textContent = `å·²ç™»è¨˜: ${members.length} äºº`;

      // æ’åº
      members.sort((a, b) => {
        const dataA = savedData[a];
        const dataB = savedData[b];
        
        if (dataA.date !== dataB.date) {
          return dataA.date.localeCompare(dataB.date);
        }
        return dataA.departure.localeCompare(dataB.departure);
      });

      members.forEach(member => {
        const memberData = savedData[member];
        const row = document.createElement('tr');
        
        row.innerHTML = `
          <td class="member-name">${member}</td>
          <td>${memberData.chineseName}</td>
          <td>${memberData.height} cm</td>
          <td>${memberData.weight} kg</td>
          <td>
            <span class="date-badge">${formatDateDMY(memberData.date)}</span>
          </td>
          <td>
            <span class="airline-tag">${memberData.airline}</span>
          </td>
          <td>
            <span class="time-badge">${memberData.departure}</span>
          </td>
        `;
        
        tableBody.appendChild(row);
      });
    }

    // é é¢è¼‰å…¥æ™‚æ›´æ–°è¡¨æ ¼
    updateTable();
  </script>
</body>
</html>